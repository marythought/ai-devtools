{% extends 'todos/base.html' %}

{% block title %}Edit TODO{% endblock %}

{% block content %}
    <h1>Edit TODO</h1>

    <form method="post" style="margin-top: 20px;">
        {% csrf_token %}
        <div style="margin-bottom: 20px;">
            <label for="title" style="display: block; margin-bottom: 8px; font-weight: 500;">Title *</label>
            <input type="text" id="title" name="title" value="{{ todo.title }}" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
        </div>
        <div style="margin-bottom: 20px;">
            <label for="description" style="display: block; margin-bottom: 8px; font-weight: 500;">Description</label>
            <textarea id="description" name="description" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; font-family: inherit;">{{ todo.description }}</textarea>
        </div>
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Due Date</label>
            <div style="display: flex; gap: 10px;">
                <input type="date" id="due_date_date" name="due_date_date" value="{% if todo.due_date %}{{ todo.due_date|date:'Y-m-d' }}{% endif %}" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                <select id="due_date_hour" name="due_date_hour" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                    <option value="">Hour (optional)</option>
                    <option value="00" {% if todo.due_date and todo.due_date.hour == 0 %}selected{% endif %}>12 AM</option>
                    <option value="01" {% if todo.due_date and todo.due_date.hour == 1 %}selected{% endif %}>1 AM</option>
                    <option value="02" {% if todo.due_date and todo.due_date.hour == 2 %}selected{% endif %}>2 AM</option>
                    <option value="03" {% if todo.due_date and todo.due_date.hour == 3 %}selected{% endif %}>3 AM</option>
                    <option value="04" {% if todo.due_date and todo.due_date.hour == 4 %}selected{% endif %}>4 AM</option>
                    <option value="05" {% if todo.due_date and todo.due_date.hour == 5 %}selected{% endif %}>5 AM</option>
                    <option value="06" {% if todo.due_date and todo.due_date.hour == 6 %}selected{% endif %}>6 AM</option>
                    <option value="07" {% if todo.due_date and todo.due_date.hour == 7 %}selected{% endif %}>7 AM</option>
                    <option value="08" {% if todo.due_date and todo.due_date.hour == 8 %}selected{% endif %}>8 AM</option>
                    <option value="09" {% if todo.due_date and todo.due_date.hour == 9 %}selected{% endif %}>9 AM</option>
                    <option value="10" {% if todo.due_date and todo.due_date.hour == 10 %}selected{% endif %}>10 AM</option>
                    <option value="11" {% if todo.due_date and todo.due_date.hour == 11 %}selected{% endif %}>11 AM</option>
                    <option value="12" {% if todo.due_date and todo.due_date.hour == 12 %}selected{% endif %}>12 PM</option>
                    <option value="13" {% if todo.due_date and todo.due_date.hour == 13 %}selected{% endif %}>1 PM</option>
                    <option value="14" {% if todo.due_date and todo.due_date.hour == 14 %}selected{% endif %}>2 PM</option>
                    <option value="15" {% if todo.due_date and todo.due_date.hour == 15 %}selected{% endif %}>3 PM</option>
                    <option value="16" {% if todo.due_date and todo.due_date.hour == 16 %}selected{% endif %}>4 PM</option>
                    <option value="17" {% if todo.due_date and todo.due_date.hour == 17 %}selected{% endif %}>5 PM</option>
                    <option value="18" {% if todo.due_date and todo.due_date.hour == 18 %}selected{% endif %}>6 PM</option>
                    <option value="19" {% if todo.due_date and todo.due_date.hour == 19 %}selected{% endif %}>7 PM</option>
                    <option value="20" {% if todo.due_date and todo.due_date.hour == 20 %}selected{% endif %}>8 PM</option>
                    <option value="21" {% if todo.due_date and todo.due_date.hour == 21 %}selected{% endif %}>9 PM</option>
                    <option value="22" {% if todo.due_date and todo.due_date.hour == 22 %}selected{% endif %}>10 PM</option>
                    <option value="23" {% if todo.due_date and todo.due_date.hour == 23 %}selected{% endif %}>11 PM</option>
                </select>
            </div>
        </div>
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Categories</label>
            {% if categories %}
                {% for category in categories %}
                    <div style="margin-bottom: 5px;">
                        <label style="display: inline-flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" name="categories" value="{{ category.id }}"
                                {% if category in todo.categories.all %}checked{% endif %}
                                style="margin-right: 8px;">
                            <span>{{ category.name }}</span>
                        </label>
                    </div>
                {% endfor %}
            {% else %}
                <p style="color: #999; font-size: 14px; font-style: italic;">No categories yet. <a href="{% url 'manage_categories' %}" style="color: #007bff;">Create one now!</a></p>
            {% endif %}
        </div>
        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn">Save Changes</button>
            <a href="{% url 'todo_list' %}" class="btn" style="background-color: #6c757d;">Cancel</a>
        </div>
    </form>
{% endblock %}
